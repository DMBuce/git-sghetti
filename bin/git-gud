#!/bin/bash

# define some vars
prog="${0##*/}"
SUBDIRECTORY_OK=Yes
NONGIT_OK=Yes
OPTIONS_KEEPDASHDASH=
OPTIONS_STUCKLONG=
OPTIONS_SPEC="\
${prog/-/ }

Open a random git man page.
--
h,help!       Show this help message and exit
"

# normalize options, set up shell functions, define $GIT_DIR, $GIT_OBJECT_DIRECTORY
. "$(git --exec-path)/git-sh-setup"

# parse options
while (( $# )); do
	case "$1" in
		-h|--help)
			usage
		;;
		--)
			shift
			break
		;;
		-*)
			die "Unimplemented option (this is a bug): $1"
		;;
		*)
			break
		;;
	esac
	shift
done

# do the thing
manpath="$(manpath)"
man "$(find ${manpath//:/ } -type f | grep -o 'git-[^.]*' | shuf -n1)"

